# AMAZON
export AWS_ACCESS_KEY_ID=''
export AWS_SECRET_ACCESS_KEY=''
export SECRET_TOKEN=''

# ENVIRONMENT
export JAVA_HOME=/System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home
export MONGO_HOME=/usr/local/mongodb
export MYSQL_HOME=/usr/local/mysql
export REDIS_HOME=/usr/local/redis
export RVM_HOME=~/.rvm
export TOMCAT_HOME=/usr/local/tomcat

export PATH=${PATH}:${JAVA_HOME}/bin:${MONGO_HOME}/bin:${MYSQL_HOME}/bin:${REDIS_HOME}/src:${TOMCAT_HOME}/bin:${RVM_HOME}/bin

export EDITOR='/usr/local/bin/sublime'
export GIT_EDITOR='/usr/local/bin/sublime'

# RUBY
source ~/.rvm/scripts/rvm

# ALIAS
alias ...='cd ../..'
alias ..='cd ..'
alias .='cd .'
alias cap='bundle exec cap'
alias capfull='git push && git push --tags && bundle exec cap production deploy && cap production db:migrate && cap production db:seed'
alias capush='git push && git push --tags && bundle exec cap production deploy'
alias cls='clear'
alias dev='cd ~/Development'
alias folders='ls -Gal | grep ^d'
alias hclear='history -c'
alias ip='curl ifconfig.me'
alias kill='kill -9'
alias killnautilus='killall -9 nautilus'
alias la='ls -lah'
alias psj='jps -l'
alias psx='ps aux | grep'
alias reload='source ~/.bashrc; source ~/.bash_profile'
alias speedup='sudo find /private/var/log/asl/* -mtime +5 -exec rm -rf {} \;'
alias upgrade='sudo apt-get update && sudo apt-get upgrade && sudo apt-get clean'
alias work='cd ~/workspace'

## GIT
alias clone='git clone'
alias fetch='git fetch --all; git fetch --tag'
alias ga='git commit -am'
alias gc='git commit'
alias gd='git difftool -y -x "sdiff" | less'
alias gg='gitg &'
alias gk='git checkout'
alias gl="git log --pretty=format:'%Cred%h%Creset%C(yellow)%d%Creset %s %Cgreen(%cr) %C(cyan  )<%an>%Creset' --abbrev-commit"
alias gm='git merge'
alias gs='git status -sb'
alias master='git checkout master'
alias pull='git pull'
alias push='git push && git push --tags'
alias remote='git config remote.origin.url'

### stash
alias pop='git stash pop'
alias stash='git add -A && git stash'

### rebase
alias rebase...='git rebase --continue'
alias rebase='git add -A && git stash && git pull --rebase'

merge_theirs() {
  BRANCH=$1

  git merge --strategy recursive -X theirs $BRANCH
}

tag() {
  git tag -a "$1" -m "$1"

  echo "Now your project is on version '`git describe`'"
}

## RUBY
alias be='bundle exec'
alias bi='bundle install'
alias bu='bundle update'
alias cucumber='bundle exec cucumber'
alias guard='bundle exec guard'
alias migrate='rake db:drop:all && rake db:create:all && rake db:migrate && rake db:test:prepare'
alias rc='rails c'
alias rs='rails s'
alias rsp='rails s -p 3001'
alias rspec='bundle exec rspec'
alias seed='rake db:seed'
alias spec='bundle exec rspec spec'

## JS
alias jasmine='node_modules/jasmine-node/bin/jasmine-node --forceexit'
alias jasmine2='node_modules/jasmine-node/bin/jasmine-node --forceExit'

PROMPT_COMMAND='echo -ne "\033]0; ${PWD##*/}\007" && prompt'

# BASH
prompt() {
  local BRANCH=$(git branch 2> /dev/null | grep \* | sed 's/* //')
  local CYAN='\033[0;36m'
  local LOCALLY='\w'
  local NO_COLOR='\033[1;0m'
  local RUBY_VERSION=$(~/.rvm/bin/rvm-prompt v)
  local WHITE='\033[0;37m'
  local YELLOW='\033[0;33m'

  export PS1="${CYAN}${LOCALLY} ${WHITE}(${RUBY_VERSION}) [${BRANCH}] ${YELLOW}$ ${NO_COLOR}"
}

# METHODS
keygen() {
  KEY_PATH=~/.ssh/"$1"
  EMAIL=$2

  ssh-keygen -t rsa -b 4096 -f $KEY_PATH -C $2
  chmod 600 $KEY_PATH
  ssh-add $KEY_PATH
  cat "${KEY_PATH}.pub"
}
